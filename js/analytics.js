!function(e){"use strict";var t=e.location,a=e.document,i=e.document.currentScript,n=i&&i.getAttribute("data-domain"),r=i&&i.getAttribute("src"),o=i&&i.getAttribute("data-stream"),s=!1,c=new URL(r).origin;function l(i,r){if(!/^localhost$|^127(?:\.[0-9]+){0,2}\.[0-9]+$|^(?:0*\:)*?:?0*1$/.test(t.hostname)&&"file:"!==t.protocol){var s=function(e){for(var t=(e=e.replace("?","")).split("&"),a={},i=0;i<t.length;i++){var n=t[i].split("="),r=decodeURIComponent(n[0]),o=decodeURIComponent(n[1]);if(void 0===a[r])a[r]=decodeURIComponent(o);else if("string"==typeof a[r]){var s=[a[r],decodeURIComponent(o)];a[r]=s}else a[r].push(decodeURIComponent(o))}return a}(t.search),l={};if(l.stream_key=s.stream_key||o,l.n=i,l.u=t.href,l.d=n,l.r=a.referrer||null,l.w=e.innerWidth,l.s=e.location,localStorage.getItem("_"+l.stream_key)&&(l.initial_click_id=localStorage.getItem("_"+l.stream_key)),!l.stream_key)return!1;var p=new URLSearchParams(l),d=new XMLHttpRequest;d.open("GET",c+"/api/clicks/?"+p,!0),d.setRequestHeader("Content-Type","application/json"),d.send(JSON.stringify(l)),d.onload=function(){var e=d.response,t=JSON.parse(e);t.id&&!l.initial_click_id&&localStorage.setItem("_"+l.stream_key,t.id)},d.onreadystatechange=function(){4==d.readyState&&r&&r.callback&&r.callback()}}}function p(){l("pageview")}try{var d=e.history;if(d.pushState){var u=d.pushState;d.pushState=function(){u.apply(this,arguments),p()},e.addEventListener("popstate",p)}var m=e.plausible&&e.plausible.q||[];e.plausible=l;for(var f=0;f<m.length;f++)l.apply(this,m[f]);"prerender"===a.visibilityState?a.addEventListener("visibilitychange",(function(){s||"visible"!==a.visibilityState||(s=!0,p())})):p()}catch(e){(new Image).src=c+"/api/error/?message="+encodeURIComponent(e.message)}}(window);